- [Accessing and Using ObjectId in Mongoose](#accessing-and-using-objectid-in-mongoose)
- [Example](#example)
  - [Schema and Model Definition](#schema-and-model-definition)
  - [Creating and Saving a Document](#creating-and-saving-a-document)
  - [Finding a Document by ObjectId](#finding-a-document-by-objectid)
  - [Converting String to ObjectId](#converting-string-to-objectid)
- [Summary](#summary)
- [Example](#example-1)
  - [Schema and Model Definition](#schema-and-model-definition-1)
  - [Creating and Saving a Document](#creating-and-saving-a-document-1)
  - [Finding a Document and Using the `id` Getter](#finding-a-document-and-using-the-id-getter)
- [Summary](#summary-1)

Certainly! In MongoDB and Mongoose, every document has a unique identifier called `_id`, which is of type `ObjectId`. This identifier is automatically generated by MongoDB if not provided during the document creation.

### Accessing and Using ObjectId in Mongoose

1. **Accessing `_id`**:

   - Each document has an `_id` field that can be accessed directly.
   - In Mongoose models, this field is of type `ObjectId`.

2. **Converting ObjectId to String**:
   - The `ObjectId` can be converted to a string using the `toString()` method.

### Example

Here's an example demonstrating how to work with `ObjectId` in Mongoose.

#### Schema and Model Definition

First, let's define a schema and model.

```javascript
const mongoose = require("mongoose");
const { Schema, model, Types } = mongoose;

// Define a Schema
const productSchema = new Schema({
  name: { type: String, required: true },
  price: { type: Number, required: true },
  description: { type: String, required: true },
});

// Create a Model
const Product = model("Product", productSchema);
```

#### Creating and Saving a Document

When you create and save a document, MongoDB automatically assigns an `_id` of type `ObjectId`.

```javascript
const createProduct = async () => {
  const product = new Product({
    name: "Sample Product",
    price: 19.99,
    description: "This is a sample product.",
  });

  try {
    const result = await product.save();
    console.log("Product Created:", result);

    // Accessing the ObjectId
    const objectId = result._id;
    console.log("ObjectId:", objectId);

    // Converting ObjectId to String
    const objectIdString = objectId.toString();
    console.log("ObjectId as String:", objectIdString);
  } catch (error) {
    console.error("Error creating product:", error);
  }
};

createProduct();
```

#### Finding a Document by ObjectId

You can also use `ObjectId` to query documents.

```javascript
const findProductById = async (id) => {
  try {
    const product = await Product.findById(id);
    if (product) {
      console.log("Product Found:", product);
    } else {
      console.log("Product not found");
    }
  } catch (error) {
    console.error("Error finding product:", error);
  }
};

// Example usage
const someObjectId = "60d9f114f3a2c841d8f6d3b5"; // Replace with an actual ObjectId from your database
findProductById(someObjectId);
```

#### Converting String to ObjectId

If you have a string representation of an `ObjectId` and you need to convert it back to `ObjectId`, you can use `Types.ObjectId`.

```javascript
const stringId = "60d9f114f3a2c841d8f6d3b5"; // Replace with your string ID
const objectId = Types.ObjectId(stringId);

findProductById(objectId);
```

### Summary

- **Accessing `_id`**: Directly via the document's `_id` field.
- **Converting to String**: Use `toString()` method on the `ObjectId`.
- **Finding by `ObjectId`**: Use `findById` method.
- **Converting String to `ObjectId`**: Use `Types.ObjectId`.

These operations help you efficiently handle and manipulate `ObjectId` values in your Mongoose and MongoDB applications.

Yes, that's correct! Mongoose provides a virtual getter for the `_id` field called `id`. This virtual getter allows you to access the `_id` as a string directly on your Mongoose document without needing to manually call `toString()`.

### Example

Here's an example to demonstrate how you can use the `id` getter in Mongoose.

#### Schema and Model Definition

Define a schema and a model as usual.

```javascript
const mongoose = require("mongoose");
const { Schema, model } = mongoose;

// Define a Schema
const productSchema = new Schema({
  name: { type: String, required: true },
  price: { type: Number, required: true },
  description: { type: String, required: true },
});

// Create a Model
const Product = model("Product", productSchema);
```

#### Creating and Saving a Document

When you create and save a document, you can access the `id` getter to get the string representation of the `_id`.

```javascript
const createProduct = async () => {
  const product = new Product({
    name: "Sample Product",
    price: 19.99,
    description: "This is a sample product.",
  });

  try {
    const result = await product.save();
    console.log("Product Created:", result);

    // Accessing the ObjectId as a string using the id getter
    const objectIdString = result.id;
    console.log("ObjectId as String:", objectIdString);
  } catch (error) {
    console.error("Error creating product:", error);
  }
};

createProduct();
```

#### Finding a Document and Using the `id` Getter

You can also use the `id` getter when retrieving documents.

```javascript
const findProductById = async (id) => {
  try {
    const product = await Product.findById(id);
    if (product) {
      console.log("Product Found:", product);

      // Accessing the ObjectId as a string using the id getter
      const objectIdString = product.id;
      console.log("ObjectId as String:", objectIdString);
    } else {
      console.log("Product not found");
    }
  } catch (error) {
    console.error("Error finding product:", error);
  }
};

// Example usage
const someObjectId = "60d9f114f3a2c841d8f6d3b5"; // Replace with an actual ObjectId from your database
findProductById(someObjectId);
```

### Summary

- **`id` Getter**: Mongoose documents have a virtual `id` getter that returns the string representation of the `_id` field.
- **Usage**: Simply access the `id` property on a Mongoose document instance to get the `_id` as a string.

This virtual getter makes it convenient to work with the `ObjectId` in a more readable format, especially when you need to use it in contexts where a string is required.
